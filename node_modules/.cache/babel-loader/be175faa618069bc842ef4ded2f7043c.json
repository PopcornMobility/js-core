{"ast":null,"code":"import _classCallCheck from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\n\nvar _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/Users/stefanm/Projects/js-core/src/components/core/Menu/MenuTop/index.js\";\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Menu } from 'antd';\nimport { Link, withRouter } from 'react-router-dom';\nimport store from 'store';\nimport _ from 'lodash';\nimport styles from './style.module.scss';\nvar SubMenu = Menu.SubMenu,\n    Divider = Menu.Divider;\n\nvar mapStateToProps = function mapStateToProps(_ref) {\n  var menu = _ref.menu,\n      settings = _ref.settings;\n  return {\n    menuData: menu.menuTopData,\n    isLightTheme: settings.isLightTheme,\n    isSettingsOpen: settings.isSettingsOpen\n  };\n};\n\nvar MenuTop = (_dec = connect(mapStateToProps), withRouter(_class = _dec(_class = (_temp = /*#__PURE__*/function (_React$Component) {\n  _inherits(MenuTop, _React$Component);\n\n  function MenuTop() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MenuTop);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MenuTop)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedKeys: store.get('app.menu.selectedKeys') || []\n    };\n\n    _this.setSelectedKeys = function (props) {\n      var menuData = _this.props.menuData;\n\n      var flattenItems = function flattenItems(items, key) {\n        return items.reduce(function (flattenedItems, item) {\n          flattenedItems.push(item);\n\n          if (Array.isArray(item[key])) {\n            return flattenedItems.concat(flattenItems(item[key], key));\n          }\n\n          return flattenedItems;\n        }, []);\n      };\n\n      var selectedItem = _.find(flattenItems(menuData, 'children'), ['url', props.location.pathname]);\n\n      _this.setState({\n        selectedKeys: selectedItem ? [selectedItem.key] : []\n      });\n    };\n\n    _this.handleClick = function (e) {\n      var _this$props = _this.props,\n          dispatch = _this$props.dispatch,\n          isSettingsOpen = _this$props.isSettingsOpen;\n      store.set('app.menu.selectedKeys', [e.key]);\n\n      if (e.key === 'settings') {\n        dispatch({\n          type: 'settings/CHANGE_SETTING',\n          payload: {\n            setting: 'isSettingsOpen',\n            value: !isSettingsOpen\n          }\n        });\n        return;\n      }\n\n      _this.setState({\n        selectedKeys: [e.key]\n      });\n    };\n\n    _this.generateMenuItems = function () {\n      var _this$props$menuData = _this.props.menuData,\n          menuData = _this$props$menuData === void 0 ? [] : _this$props$menuData;\n\n      var generateItem = function generateItem(item) {\n        var key = item.key,\n            title = item.title,\n            url = item.url,\n            icon = item.icon,\n            pro = item.pro,\n            disabled = item.disabled;\n\n        if (item.divider) {\n          return /*#__PURE__*/React.createElement(Divider, {\n            key: Math.random(),\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 16\n            }\n          });\n        }\n\n        if (item.url) {\n          return /*#__PURE__*/React.createElement(Menu.Item, {\n            key: key,\n            disabled: disabled,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 11\n            }\n          }, item.target ? /*#__PURE__*/React.createElement(\"a\", {\n            href: url,\n            target: item.target,\n            rel: \"noopener noreferrer\",\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }\n          }, icon && /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(icon, \" \").concat(styles.icon),\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 26\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: styles.title,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }\n          }, title), pro && /*#__PURE__*/React.createElement(\"span\", {\n            className: \"badge badge-primary ml-2\",\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 25\n            }\n          }, \"PRO\")) : /*#__PURE__*/React.createElement(Link, {\n            to: url,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }\n          }, icon && /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(icon, \" \").concat(styles.icon),\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 26\n            }\n          }), /*#__PURE__*/React.createElement(\"span\", {\n            className: styles.title,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }\n          }, title), pro && /*#__PURE__*/React.createElement(\"span\", {\n            className: \"badge badge-primary ml-2\",\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 25\n            }\n          }, \"PRO\")));\n        }\n\n        return /*#__PURE__*/React.createElement(Menu.Item, {\n          key: key,\n          disabled: disabled,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 9\n          }\n        }, icon && /*#__PURE__*/React.createElement(\"span\", {\n          className: \"\".concat(icon, \" \").concat(styles.icon),\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 20\n          }\n        }), /*#__PURE__*/React.createElement(\"span\", {\n          className: styles.title,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }\n        }, title), pro && /*#__PURE__*/React.createElement(\"span\", {\n          className: \"badge badge-primary ml-2\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 19\n          }\n        }, \"PRO\"));\n      };\n\n      var generateSubmenu = function generateSubmenu(items) {\n        return items.map(function (menuItem) {\n          if (menuItem.children) {\n            var subMenuTitle = /*#__PURE__*/React.createElement(\"span\", {\n              className: styles.menu,\n              key: menuItem.key,\n              __self: _assertThisInitialized(_assertThisInitialized(_this)),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 13\n              }\n            }, /*#__PURE__*/React.createElement(\"span\", {\n              className: styles.title,\n              __self: _assertThisInitialized(_assertThisInitialized(_this)),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 15\n              }\n            }, menuItem.title), menuItem.icon && /*#__PURE__*/React.createElement(\"span\", {\n              className: \"\".concat(menuItem.icon, \" \").concat(styles.icon),\n              __self: _assertThisInitialized(_assertThisInitialized(_this)),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 33\n              }\n            }));\n            return /*#__PURE__*/React.createElement(SubMenu, {\n              title: subMenuTitle,\n              key: menuItem.key,\n              __self: _assertThisInitialized(_assertThisInitialized(_this)),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 13\n              }\n            }, generateSubmenu(menuItem.children));\n          }\n\n          return generateItem(menuItem);\n        });\n      };\n\n      return menuData.map(function (menuItem) {\n        if (menuItem.children) {\n          var subMenuTitle = /*#__PURE__*/React.createElement(\"span\", {\n            className: styles.menu,\n            key: menuItem.key,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 11\n            }\n          }, /*#__PURE__*/React.createElement(\"span\", {\n            className: styles.title,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 13\n            }\n          }, menuItem.title), menuItem.icon && /*#__PURE__*/React.createElement(\"span\", {\n            className: \"\".concat(menuItem.icon, \" \").concat(styles.icon),\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 31\n            }\n          }));\n          return /*#__PURE__*/React.createElement(SubMenu, {\n            title: subMenuTitle,\n            key: menuItem.key,\n            __self: _assertThisInitialized(_assertThisInitialized(_this)),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 11\n            }\n          }, generateSubmenu(menuItem.children));\n        }\n\n        return generateItem(menuItem);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(MenuTop, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setSelectedKeys(this.props);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      this.setSelectedKeys(newProps);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var selectedKeys = this.state.selectedKeys;\n      var isLightTheme = this.props.isLightTheme;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.logo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.logoContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"resources/images/logo-inverse.png\",\n        alt: \"logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(Menu, {\n        theme: isLightTheme ? 'light' : 'dark',\n        onClick: this.handleClick,\n        selectedKeys: selectedKeys,\n        mode: \"horizontal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 9\n        }\n      }, this.generateMenuItems()));\n    }\n  }]);\n\n  return MenuTop;\n}(React.Component), _temp)) || _class) || _class);\nexport default MenuTop;","map":{"version":3,"sources":["/Users/stefanm/Projects/js-core/src/components/core/Menu/MenuTop/index.js"],"names":["React","connect","Menu","Link","withRouter","store","_","styles","SubMenu","Divider","mapStateToProps","menu","settings","menuData","menuTopData","isLightTheme","isSettingsOpen","MenuTop","state","selectedKeys","get","setSelectedKeys","props","flattenItems","items","key","reduce","flattenedItems","item","push","Array","isArray","concat","selectedItem","find","location","pathname","setState","handleClick","e","dispatch","set","type","payload","setting","value","generateMenuItems","generateItem","title","url","icon","pro","disabled","divider","Math","random","target","generateSubmenu","map","menuItem","children","subMenuTitle","newProps","logo","logoContainer","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport { Menu } from 'antd'\nimport { Link, withRouter } from 'react-router-dom'\nimport store from 'store'\nimport _ from 'lodash'\nimport styles from './style.module.scss'\n\nconst { SubMenu, Divider } = Menu\n\nconst mapStateToProps = ({ menu, settings }) => ({\n  menuData: menu.menuTopData,\n  isLightTheme: settings.isLightTheme,\n  isSettingsOpen: settings.isSettingsOpen,\n})\n\n@withRouter\n@connect(mapStateToProps)\nclass MenuTop extends React.Component {\n  state = {\n    selectedKeys: store.get('app.menu.selectedKeys') || [],\n  }\n\n  componentWillMount() {\n    this.setSelectedKeys(this.props)\n  }\n\n  componentWillReceiveProps(newProps) {\n    this.setSelectedKeys(newProps)\n  }\n\n  setSelectedKeys = props => {\n    const { menuData } = this.props\n    const flattenItems = (items, key) =>\n      items.reduce((flattenedItems, item) => {\n        flattenedItems.push(item)\n        if (Array.isArray(item[key])) {\n          return flattenedItems.concat(flattenItems(item[key], key))\n        }\n        return flattenedItems\n      }, [])\n    const selectedItem = _.find(flattenItems(menuData, 'children'), [\n      'url',\n      props.location.pathname,\n    ])\n    this.setState({\n      selectedKeys: selectedItem ? [selectedItem.key] : [],\n    })\n  }\n\n  handleClick = e => {\n    const { dispatch, isSettingsOpen } = this.props\n    store.set('app.menu.selectedKeys', [e.key])\n    if (e.key === 'settings') {\n      dispatch({\n        type: 'settings/CHANGE_SETTING',\n        payload: {\n          setting: 'isSettingsOpen',\n          value: !isSettingsOpen,\n        },\n      })\n      return\n    }\n    this.setState({\n      selectedKeys: [e.key],\n    })\n  }\n\n  generateMenuItems = () => {\n    const { menuData = [] } = this.props\n    const generateItem = item => {\n      const { key, title, url, icon, pro, disabled } = item\n      if (item.divider) {\n        return <Divider key={Math.random()} />\n      }\n      if (item.url) {\n        return (\n          <Menu.Item key={key} disabled={disabled}>\n            {item.target ? (\n              <a href={url} target={item.target} rel=\"noopener noreferrer\">\n                {icon && <span className={`${icon} ${styles.icon}`} />}\n                <span className={styles.title}>{title}</span>\n                {pro && <span className=\"badge badge-primary ml-2\">PRO</span>}\n              </a>\n            ) : (\n              <Link to={url}>\n                {icon && <span className={`${icon} ${styles.icon}`} />}\n                <span className={styles.title}>{title}</span>\n                {pro && <span className=\"badge badge-primary ml-2\">PRO</span>}\n              </Link>\n            )}\n          </Menu.Item>\n        )\n      }\n      return (\n        <Menu.Item key={key} disabled={disabled}>\n          {icon && <span className={`${icon} ${styles.icon}`} />}\n          <span className={styles.title}>{title}</span>\n          {pro && <span className=\"badge badge-primary ml-2\">PRO</span>}\n        </Menu.Item>\n      )\n    }\n    const generateSubmenu = items =>\n      items.map(menuItem => {\n        if (menuItem.children) {\n          const subMenuTitle = (\n            <span className={styles.menu} key={menuItem.key}>\n              <span className={styles.title}>{menuItem.title}</span>\n              {menuItem.icon && <span className={`${menuItem.icon} ${styles.icon}`} />}\n            </span>\n          )\n          return (\n            <SubMenu title={subMenuTitle} key={menuItem.key}>\n              {generateSubmenu(menuItem.children)}\n            </SubMenu>\n          )\n        }\n        return generateItem(menuItem)\n      })\n    return menuData.map(menuItem => {\n      if (menuItem.children) {\n        const subMenuTitle = (\n          <span className={styles.menu} key={menuItem.key}>\n            <span className={styles.title}>{menuItem.title}</span>\n            {menuItem.icon && <span className={`${menuItem.icon} ${styles.icon}`} />}\n          </span>\n        )\n        return (\n          <SubMenu title={subMenuTitle} key={menuItem.key}>\n            {generateSubmenu(menuItem.children)}\n          </SubMenu>\n        )\n      }\n      return generateItem(menuItem)\n    })\n  }\n\n  render() {\n    const { selectedKeys } = this.state\n    const { isLightTheme } = this.props\n    return (\n      <div>\n        <div className={styles.logo}>\n          <div className={styles.logoContainer}>\n            <img src=\"resources/images/logo-inverse.png\" alt=\"logo\" />\n          </div>\n        </div>\n        <Menu\n          theme={isLightTheme ? 'light' : 'dark'}\n          onClick={this.handleClick}\n          selectedKeys={selectedKeys}\n          mode=\"horizontal\"\n        >\n          {this.generateMenuItems()}\n        </Menu>\n      </div>\n    )\n  }\n}\n\nexport default MenuTop\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/stefanm/Projects/js-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/stefanm/Projects/js-core/src/components/core/Router/index.js\",\n    _class;\n\n/* eslint react/no-multi-comp: 0 */\n\n/* eslint camelcase: 0 */\nimport React from \"react\";\nimport { Route, Switch, Redirect, withRouter } from \"react-router-dom\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport ReactLoadable from \"react-loadable\";\nimport Loader from \"../../core/Loader\";\nimport IndexLayout from \"../../../layouts\";\nimport NotFoundPage from \"../../../pages/404\";\nexport var Loadable = function Loadable(loader, props) {\n  return ReactLoadable({\n    loader: loader,\n    delay: false,\n    loading: function loading() {\n      return /*#__PURE__*/React.createElement(Loader, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 20\n        }\n      });\n    },\n    render: function render(loaded) {\n      var Component = loaded.default;\n      return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 14\n        }\n      }));\n    }\n  });\n};\n\nvar ModalSwitch = withRouter(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(ModalSwitch, _React$Component);\n\n  function ModalSwitch(props) {\n    var _this2;\n\n    _classCallCheck(this, ModalSwitch);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ModalSwitch).call(this, props));\n    var previousLocation = _this2.props.location;\n    _this2.previousLocation = previousLocation;\n    return _this2;\n  }\n\n  _createClass(ModalSwitch, [{\n    key: \"UNSAFE_componentWillUpdate\",\n    value: function UNSAFE_componentWillUpdate(nextProps) {\n      var location = this.props.location;\n      var history = nextProps.history;\n\n      if (history.action !== \"POP\" && (!location.state || !location.state.modal)) {\n        this.previousLocation = location;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          location = _this$props.location,\n          routes = _this$props.routes;\n      var isModal = !!(location.state && location.state.modal && this.previousLocation !== location); // not initial render\n\n      return /*#__PURE__*/React.createElement(Switch, {\n        location: isModal ? this.previousLocation : location,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return /*#__PURE__*/React.createElement(Redirect, {\n            to: \"/dashboard\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57,\n              columnNumber: 45\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 9\n        }\n      }), routes.map(function (route) {\n        return /*#__PURE__*/React.createElement(Route, {\n          path: route.path,\n          component: !route.modal && route.component,\n          key: route.path,\n          exact: route.exact,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 11\n          }\n        });\n      }), /*#__PURE__*/React.createElement(Route, {\n        component: NotFoundPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return ModalSwitch;\n}(React.Component)) || _class;\n\nvar Router = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Router, _React$Component2);\n\n  function Router() {\n    _classCallCheck(this, Router);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Router).apply(this, arguments));\n  }\n\n  _createClass(Router, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props2 = this.props,\n          history = _this$props2.history,\n          routes = _this$props2.routes,\n          menu = _this$props2.menu,\n          title = _this$props2.title;\n      return /*#__PURE__*/React.createElement(ConnectedRouter, {\n        history: history,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(IndexLayout, {\n        menu: menu,\n        title: title,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ModalSwitch, {\n        routes: routes,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }\n      })), routes.filter(function (route) {\n        return route.modal === true;\n      }).map(function (route) {\n        return /*#__PURE__*/React.createElement(Route, {\n          path: route.path,\n          component: route.component,\n          key: route.path,\n          exact: route.exact,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }\n        });\n      }));\n    }\n  }]);\n\n  return Router;\n}(React.Component);\n\nexport default Router;","map":{"version":3,"sources":["/Users/stefanm/Projects/js-core/src/components/core/Router/index.js"],"names":["React","Route","Switch","Redirect","withRouter","ConnectedRouter","ReactLoadable","Loader","IndexLayout","NotFoundPage","Loadable","loader","props","delay","loading","render","loaded","Component","default","ModalSwitch","previousLocation","location","nextProps","history","action","state","modal","routes","isModal","map","route","path","component","exact","Router","menu","title","filter"],"mappings":"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","sourcesContent":["/* eslint react/no-multi-comp: 0 */\n/* eslint camelcase: 0 */\n\nimport React from \"react\";\nimport { Route, Switch, Redirect, withRouter } from \"react-router-dom\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport ReactLoadable from \"react-loadable\";\n\nimport Loader from \"../../core/Loader\";\nimport IndexLayout from \"../../../layouts\";\nimport NotFoundPage from \"../../../pages/404\";\n\nexport const Loadable = (loader, props) =>\n  ReactLoadable({\n    loader,\n    delay: false,\n    loading: () => <Loader />,\n    render(loaded) {\n      const Component = loaded.default;\n      return <Component {...props} />;\n    }\n  });\n\n@withRouter\nclass ModalSwitch extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const { location: previousLocation } = this.props;\n\n    this.previousLocation = previousLocation;\n  }\n\n  UNSAFE_componentWillUpdate(nextProps) {\n    const { location } = this.props;\n    const { history } = nextProps;\n\n    if (\n      history.action !== \"POP\" &&\n      (!location.state || !location.state.modal)\n    ) {\n      this.previousLocation = location;\n    }\n  }\n\n  render() {\n    const { location, routes } = this.props;\n\n    const isModal = !!(\n      location.state &&\n      location.state.modal &&\n      this.previousLocation !== location\n    ); // not initial render\n\n    return (\n      <Switch location={isModal ? this.previousLocation : location}>\n        <Route exact path=\"/\" render={() => <Redirect to=\"/dashboard\" />} />\n        {routes.map(route => (\n          <Route\n            path={route.path}\n            component={!route.modal && route.component}\n            key={route.path}\n            exact={route.exact}\n          />\n        ))}\n        <Route component={NotFoundPage} />\n      </Switch>\n    );\n  }\n}\n\nclass Router extends React.Component {\n  render() {\n    const { history, routes, menu, title } = this.props;\n\n    return (\n      <ConnectedRouter history={history}>\n        <IndexLayout menu={menu} title={title}>\n          <ModalSwitch routes={routes} />\n        </IndexLayout>\n\n        {routes\n          .filter(route => route.modal === true)\n          .map(route => (\n            <Route\n              path={route.path}\n              component={route.component}\n              key={route.path}\n              exact={route.exact}\n            />\n          ))}\n      </ConnectedRouter>\n    );\n  }\n}\n\nexport default Router;\n"]},"metadata":{},"sourceType":"module"}